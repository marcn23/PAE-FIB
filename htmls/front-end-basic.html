<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Formulario HTML Básico</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }
        form {
            width: 1200px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;

        }
        label {
            display: block;
            margin-bottom: 10px;
        }
		.label-ball {
            display: block;
            margin-bottom: 10px;
			margin-left: 3px;
       }
		input {
			display: block;
			margin-left: 10px;
			margin-bottom: 10px;
			flex-grow: 1;
		}
		.form-group {
			display: flex;
            flex-direction: row; /* Cambiamos la dirección a horizontal (fila) */
            align-items: center;
            margin-bottom: 10px;
		}
		.sepinput {
			margin-left:10px;
		}
		.tbody {
			background-color: black;
		}
    </style>
	        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>
<body>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <form id="ide">
        <center><h1>FORMULARI BÀSIC</h1></center>

		<h2>Espectacle</h2>
		<div class="form-group">
			<label for="Titol">Títol:</label>
			<input type="text" id="Titol" class="sepinput" name="Titol" placeholder="Titol del espectacle">
		</div>
		<div class="form-group">
			<label for="Orquestra">Orquestra o cobla:</label>
        	<input type="text" id="Orquestra" class="sepinput" name="Orquestra" placeholder="Nom de la cobla">
		</div>
		<div class="form-group">
			<label for="Local">Local:</label>
        	<input type="text" id="Local" class="sepinput" name="Local" placeholder="Local on es fa l'acte">
		</div>
		<div class="form-group">
			<label for="Domicili">Domicili:</label>
        	<input type="text" id="Domicili" class="sepinput" name="Domicili" placeholder="Domicili on es fa l'acte">
		</div>
		<div class="form-group">
			<label for="Provincia">Provincia:</label>
        	<input type="text" id="Provincia" class="sepinput" name="Provincia" placeholder="Provincia on es fa l'acte">
		</div>
		<div class="form-group">
			<label for="Poblacio">Població:</label>
        	<input type="text" id="Poblacio" class="sepinput" name="Poblacio" placeholder="Poblacio on es fa l'acte">
		</div>


		<h2>Declarant</h2>
		<div class="form-group">
			<label for="Nom-declarant">Nom declarant:</label>
			<input type="text" id="Nom-declarant" class="sepinput" name="Nom-declarant" placeholder="Nom del declarant">
		</div>
		<div class="form-group">
			<label for="direccio-declarant">Direcció:</label>
			<input type="text" id="direccio-declarant" class="sepinput" name="direccio-declarant" placeholder="Direcció del declarant">
		</div>
		<div class="form-group">
			<label for="CP-declarant">Codi postal:</label>
			<input type="text" id="CP-declarant" class="sepinput" name="CP-declarant" placeholder="Codi postal del declarant">
		</div>
		<div class="form-group">
			<label for="Poblacio-declarant">Població:</label>
			<input type="text" id="Poblacio-declarant" class="sepinput" name="Poblacio-declarant" placeholder="Poblacio del declarant">
		</div>
		<div class="form-group">
			<label for="Provincia-declarant">Provincia:</label>
			<input type="text" id="Provincia-declarant" class="sepinput" name="Provincia-declarant" placeholder="Provincia del declarant">
		</div>
		<div class="form-group">
			<label for="Correu-declarant">Correu electrònic:</label>
			<input type="text" id="Correu-declarant" class="sepinput" name="Correu-declarant" placeholder="Correu del declarant">
		</div>
		<div class="form-group">
			<label for="Telefon-declarant">Teléfon:</label>
			<input type="text" id="Telefon-declarant" class="sepinput" name="Telefon-declarant" placeholder="Teléfon del declarant">
		</div>
		<div class="form-group">
			<label for="Codigo-Socio-declarant">Codi soci SGAE:</label>
			<input type="text" id="Codigo-Socio-declarant" class="sepinput" name="Codigo-Socio-declarant" placeholder="Codi soci SGAE">
		</div>

		<h2>Signatura</h2>
		<div class="form-group">
			<label for="lloc-signatura">Lloc signatura:</label>
			<input type="text" id="lloc-signatura" class="sepinput" name="lloc-signatura" placeholder="Lloc signatura">
		</div>
		<div class="form-group">
			<label for="data-signatura">Data signatura:</label>
			<input type="text" id="data-signatura" class="sepinput" name="data-signatura" placeholder="Data signatura">
		</div>


		<button type="button" onclick="agregarCampo()">Agregar ballada</button>
		<script>
			var sumatorio = 0;
			function agregarCampo() {
				sumatorio = sumatorio + 1;
				const form = document.querySelector('form');
				const div = document.createElement('div');
	            div.classList.add('form-group');

				const label = document.createElement('label');
				label.textContent = 'Titol:';
				label.for = 'titol';
				const input = document.createElement('input');
				input.type = 'text';
				input.placeholder = 'Titol';
				input.id = 'Titol'+ sumatorio;
				input.name = 'Titol'+sumatorio;
				input.classList.add("sepinput");
				div.appendChild(label);
				div.appendChild(input);

				const div2 = document.createElement('div');
	            div2.classList.add('form-group');
				const label2 = document.createElement('label');
				label2.textContent = 'Autor:';
				label2.classList.add('label-ball');
				const input2 = document.createElement('input');
				input2.type = 'text';
				input2.placeholder = 'Autor';	
				input2.id = 'Autor' +sumatorio;
				input2.name = 'Autor'+sumatorio;	
				input2.classList.add("sepinput");	
				div2.appendChild(label2);
				div2.appendChild(input2);

				const div3 = document.createElement('div');
	            div3.classList.add('form-group');
				const label3 = document.createElement('label');
				label3.textContent = 'Vegades tocat:';
				label3.classList.add('label-ball');
				const input3 = document.createElement('input');
				input3.type = 'text';
				input3.placeholder = 'Vegades tocat';	
				input3.id = 'Vegades_tocat'+sumatorio;
				input3.name = 'VegadesTocat'+sumatorio;	
				input3.classList.add("sepinput");	
				div3.appendChild(label3);
				div3.appendChild(input3);

				/*const div4 = document.createElement('div');
	            div4.classList.add('form-group');
				const label4 = document.createElement('label');
				label4.textContent = 'Dia:';
				label4.classList.add('label-ball');
				const input4 = document.createElement('input');
				input4.type = 'text';
				input4.placeholder = 'Dia quan es toca';
				input4.id = 'Dia_tocat'+sumatorio;
				input4.name = 'DiaTocat'+sumatorio;	
				input4.classList.add("sepinput");		
				div4.appendChild(label4);
				div4.appendChild(input4);

				const div5 = document.createElement('div');
	            div5.classList.add('form-group');
				const label5 = document.createElement('label');
				label5.textContent = 'Número de programa:';
				label5.classList.add('label-ball');
				const input5 = document.createElement('input');
				input5.type = 'text';
				input5.placeholder = 'Número de programa';	
				input5.id = 'Num_Programa'+sumatorio;
				input5.name = 'NumeroPrograma'+sumatorio;	
				input5.classList.add("sepinput");	
				div5.appendChild(label5);
				div5.appendChild(input5);*/
				
				var hrElement = document.createElement('hr');
				const targ = form.querySelectorAll('div')[15];
				//form.insertBefore(div5, targ.nextElementSibling);
				//form.insertBefore(div4, targ.nextElementSibling);
				form.insertBefore(div3, targ.nextElementSibling);
				form.insertBefore(div2, targ.nextElementSibling);
				form.insertBefore(div, targ.nextElementSibling);
				form.insertBefore(hrElement,targ.nextElementSibling);
			}
		</script>
        
		<!--<a href="Programa2.pdf" download="aaaa.pdf">Descargar arch</a> -->
        <!--<button type="submit" href="Programa2.pdf" download="aaaa.pdf">Enviar</button>-->
		<button type="submit">Enviar</button>
    </form>
	<script>
		document.getElementById('ide').addEventListener('submit', function(event) {
		event.preventDefault(); // Prevent the default form submission

		// Get form data
		const formData = new FormData(this);
		
		// Convert form data to JSON format
		const jsonData = {};
		formData.forEach((value, key) => {
			jsonData[key] = value;
		});
		
		// Send POST request to Python API
		fetch('/api/base', {
			method: 'POST',
			headers: {
			'Content-Type': 'application/json'
			},
			body: JSON.stringify(jsonData)
		})
		.then(response => response.blob())  // Convert the response to a Blob
      .then(blob => {
        // Create a download link for the PDF
        var url = window.URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = 'example.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      })
      .catch(error => {
        console.error('Error:', error);
      });
		});
	</script>
	
</body>
</html>
